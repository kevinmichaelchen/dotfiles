# Starship prompt configuration managed by Chezmoi
# Theme: Rose Pine (matches Ghostty)

add_newline = true
command_timeout = 1000

palette = "rose_pine"

[palettes.rose_pine]
overlay = "#26233a"
love = "#eb6f92"
gold = "#f6c177"
rose = "#ebbcba"
pine = "#31748f"
foam = "#9ccfd8"
iris = "#c4a7e7"
text = "#e0def4"
subtle = "#908caa"
muted = "#6e6a86"
base = "#191724"

format = """
${custom.machine}\
$directory\
$git_branch\
$git_status\
$git_state\
$nodejs\
$python\
$rust\
$golang\
$docker_context\
$fill\
$cmd_duration\
$line_break\
$character"""

right_format = """$time"""

[character]
success_symbol = "[â¯](bold foam)"
error_symbol = "[â¯](bold love)"
vimcmd_symbol = "[â®](bold pine)"

[directory]
style = "bold pine"
truncation_length = 3
truncate_to_repo = true
read_only = " ðŸ”’"

[git_branch]
symbol = "ðŸŒ± "
style = "bold iris"
format = "on [$symbol$branch(:$remote_branch)]($style) "

[git_status]
format = "[$all_status$ahead_behind]($style)"
style = "bold love"
conflicted = "="
ahead = "â‡¡${count}"
behind = "â‡£${count}"
diverged = "â‡•â‡¡${ahead_count}â‡£${behind_count}"
untracked = "?"
stashed = "â‰¡"
modified = "!"
staged = "+"
renamed = "Â»"
deleted = "âœ˜"

[git_state]
format = '[ \($state( $progress_current/$progress_total)\) ]($style)'
style = "bg:iris fg:love bold"
cherry_pick = "ðŸ’"
rebase = "REBASING"
merge = "MERGING"

[git_metrics]
disabled = true

[nodejs]
symbol = "â¬¢ "
format = "via [$symbol$version]($style) "
style = "bold foam"

[python]
symbol = "ðŸ "
format = "via [$symbol$version]($style) "
style = "bold foam"
# Only detect in actual Python projects (not just any dir with .py files)
detect_extensions = []
detect_files = [".python-version", "pyproject.toml", "Pipfile", "requirements.txt", "uv.lock"]
detect_folders = [".venv", "venv", "__pycache__"]

[rust]
symbol = "ðŸ¦€ "
format = "via [$symbol$version]($style) "
style = "bold foam"

[golang]
symbol = "ðŸ¹ "
format = "via [$symbol$version]($style) "
style = "bold foam"

[docker_context]
symbol = "ðŸ³ "
format = "via [$symbol$context]($style) "
style = "bold foam"
only_with_files = true

[cmd_duration]
min_time = 2_000
format = "took [$duration](bold gold) "
show_milliseconds = false

[time]
disabled = false
format = "[$time](subtle)"
time_format = "%H:%M"

[fill]
symbol = " "

[line_break]
disabled = false

[username]
style_user = "fg:subtle"
style_root = "fg:love bold"
format = "[$user]($style) "
disabled = false
show_always = false

[status]
symbol = "âœ˜"
format = '[$symbol $common_meaning$signal_name$maybe_int]($style) '
style = "love"
map_symbol = true
disabled = false

# Machine identifier - shows Tailscale hostname or IP
[custom.machine]
command = '''
if command -v tailscale >/dev/null 2>&1; then
  tailscale status --self --json 2>/dev/null | jq -r '.Self.DNSName | split(".") | .[0]' 2>/dev/null
elif [[ "$OSTYPE" == darwin* ]]; then
  ipconfig getifaddr en0 2>/dev/null || hostname -s
else
  hostname -I 2>/dev/null | awk '{print $1}' || hostname -s
fi
'''
when = "true"
format = "[$output](bold rose):"
shell = ["bash", "--noprofile", "--norc"]

[battery]
disabled = true

[memory_usage]
disabled = true

[aws]
disabled = true
